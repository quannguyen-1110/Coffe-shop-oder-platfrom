<!DOCTYPE html>
<html>
<head>
    <title>VNPay Callback Tester</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        input, button { padding: 10px; margin: 5px 0; width: 100%; }
        button { background: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background: #45a049; }
        .result { margin-top: 20px; padding: 15px; background: #f0f0f0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ VNPay Callback Tester</h1>
        <p>Test callback API m√† kh√¥ng c·∫ßn VNPay th·∫≠t</p>
        
        <label>Order ID:</label>
        <input type="text" id="orderId" placeholder="ORD_20250113_XXX" />
        
        <label>Amount (VNƒê):</label>
        <input type="number" id="amount" value="100000" />
        
        <label>Response Code (00 = success, 24 = cancel):</label>
        <input type="text" id="responseCode" value="00" />
        
        <button onclick="testCallback()">üöÄ Test Callback</button>
        
        <div class="result" id="result"></div>
    </div>

    <script>
        function testCallback() {
            const orderId = document.getElementById('orderId').value;
            const amount = document.getElementById('amount').value;
            const responseCode = document.getElementById('responseCode').value;
            
            if (!orderId) {
                alert('Vui l√≤ng nh·∫≠p Order ID!');
                return;
            }
            
            // T·∫°o callback URL gi·∫£ (kh√¥ng c√≥ SecureHash ƒë·ªÉ test)
            const callbackUrl = `http://localhost:5144/api/Payment/vnpay/callback?` +
                `vnp_Amount=${amount}00` +
                `&vnp_BankCode=NCB` +
                `&vnp_BankTranNo=VNP01` +
                `&vnp_CardType=ATM` +
                `&vnp_OrderInfo=Thanh toan don hang ${orderId}` +
                `&vnp_PayDate=${new Date().toISOString().replace(/[-:T.]/g, '').slice(0, 14)}` +
                `&vnp_ResponseCode=${responseCode}` +
                `&vnp_TmnCode=AEVWGFV2` +
                `&vnp_TransactionNo=${Math.floor(Math.random() * 100000000)}` +
                `&vnp_TransactionStatus=${responseCode}` +
                `&vnp_TxnRef=${orderId}` +
                `&vnp_SecureHash=test123`;
            
            document.getElementById('result').innerHTML = 
                `<h3>üì§ ƒêang g·ªçi callback...</h3>` +
                `<p><strong>URL:</strong> ${callbackUrl}</p>` +
                `<p>ƒêang redirect...</p>`;
            
            // Redirect ƒë·ªÉ test
            window.location.href = callbackUrl;
        }
    </script>
</body>
</html>
